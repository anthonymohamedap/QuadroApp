<UserControl
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="using:QuadroApp.ViewModels"
    xmlns:m="using:QuadroApp.Model"
    xmlns:conv="using:QuadroApp.Converters"
    x:Class="QuadroApp.Views.KlantenView"
    x:DataType="vm:KlantenViewModel"
    Background="#F5F5F5">

	<Grid RowDefinitions="Auto,*,Auto">
		<!-- â–‘â–‘ HEADER â–‘â–‘ -->
		<Border Grid.ColumnSpan="2"
				Background="#444A50"
				Height="70">
			<DockPanel LastChildFill="False" Margin="20,0">

				<!-- ðŸ”¹ Titel links -->
				<StackPanel DockPanel.Dock="Left"
							Orientation="Horizontal"
							VerticalAlignment="Center"
							Spacing="10">
					<Ellipse Width="35" Height="35" Fill="#F5C242"/>
					<TextBlock Text="QUADRO"
							   Foreground="White"
							   FontWeight="Bold"
							   FontSize="20"
							   VerticalAlignment="Center"/>
					<TextBlock Text="LIJSTENBEHEER"
							   Foreground="#CCC"
							   FontSize="13"
							   Margin="5,0,0,0"
							   VerticalAlignment="Center"/>
				</StackPanel>

				<!-- ðŸ”¹ Terugknop rechtsboven -->
				<Button Content="â¬…ï¸ Terug"
						Command="{Binding GaTerugCommand}"
						DockPanel.Dock="Right"
						VerticalAlignment="Top"
						HorizontalAlignment="Right"
						Margin="0,10,10,0"
						Background="#F5C242"
						Foreground="#222"
						FontWeight="Bold"
						CornerRadius="8"
						Padding="10,5"
						Width="100"
						Height="32"/>
			</DockPanel>
		</Border>


		<!-- â–‘â–‘ MAIN CONTENT â–‘â–‘ -->
		<ScrollViewer Grid.Row="1" Margin="0,10,0,10" VerticalScrollBarVisibility="Auto">
			<StackPanel Margin="20" Spacing="15">

				<TextBlock Text="ðŸ‘¥ Klantenbeheer"
                           FontSize="24"
                           FontWeight="Bold"
                           Foreground="#222"
                           Margin="0,0,0,5"/>
				<!-- Toolbar -->
				<StackPanel Orientation="Horizontal" Spacing="10" Margin="0,0,0,15">
					<TextBox Width="250"
							 Watermark="Zoek klant..."
							 Text="{Binding Zoekterm, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
					<Button Content="âž• Nieuw"     Command="{Binding NewCommand}"     Classes="MainBtn"/>
					<Button Content="âœï¸ Bewerken"  Command="{Binding EditCommand}"    Classes="MainBtn"/>
					<Button Content="ðŸ—‘ï¸ Verwijderen" Command="{Binding DeleteCommand}" Classes="MainBtn"/>
					<Button Content="ðŸ’¾ Opslaan"   Command="{Binding SaveCommand}"    Classes="MainBtn"/>
					<Button Content="ðŸ”„ Ververs"   Command="{Binding RefreshCommand}" Classes="MainBtn"/>
				</StackPanel>
				<!-- â–‘â–‘ TITELS â–‘â–‘ -->
				<Grid ColumnDefinitions="2*,2*,3*,2*,2*,Auto" RowDefinitions="Auto,Auto" Margin="5,0,5,5">
					<TextBlock Text="Naam" Grid.Column="0" Grid.Row="0" FontWeight="Bold" Foreground="#000000"/>
					<TextBlock Text="Email" Grid.Column="1" Grid.Row="0" FontWeight="Bold" Foreground="#000000"/>
					<TextBlock Text="Telefoon" Grid.Column="2" Grid.Row="0" FontWeight="Bold" Foreground="#000000"/>
					<TextBlock Text="Adres" Grid.Column="3" Grid.Row="0" FontWeight="Bold" Foreground="#000000"/>
					<TextBlock Text="Opmerking" Grid.Column="4" Grid.Row="0" FontWeight="Bold" Foreground="#000000"/>
					<TextBlock Text="Actie" Grid.Column="4" Grid.Row="0" FontWeight="Bold" Foreground="#000000"/>

				</Grid>
				<!-- Lijst -->
				<Border BorderBrush="#DDD" BorderThickness="1" CornerRadius="8" Background="White">
					<ListBox ItemsSource="{Binding FilteredKlanten}"
							 SelectedItem="{Binding SelectedKlant, Mode=TwoWay}"
							 BorderThickness="0"
							 Background="Transparent">

						<!-- âœ… Highlight zonder converter -->
						<ListBox.Styles>
							<Style Selector="ListBoxItem">
								<Setter Property="CornerRadius" Value="6"/>
								<Setter Property="Margin" Value="0,0,0,6"/>
								<Setter Property="Padding" Value="0"/>
							</Style>
							<Style Selector="ListBoxItem:pointerover">
								<Setter Property="Background" Value="#FFF7DA"/>
							</Style>
							<Style Selector="ListBoxItem:selected">
								<Setter Property="Background" Value="#FFF3BF"/>
							</Style>
						</ListBox.Styles>

						<ListBox.ItemTemplate>
							<DataTemplate x:DataType="m:Klant">
								<Border Padding="10">
									<Grid ColumnDefinitions="2*,2*,3*,2*,2*,Auto" RowDefinitions="Auto,Auto" VerticalAlignment="Center">
										<!-- Main klant info in first row -->
										<StackPanel Grid.Row="0">
											<TextBlock Text="{Binding Voornaam}"  Foreground="#222" FontSize="15" FontWeight="Bold"/>
											<TextBlock Text="{Binding Achternaam}" Foreground="#555" FontSize="13"/>
										</StackPanel>
										<TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding Email}"    Foreground="#333" VerticalAlignment="Center"/>
										<TextBlock Grid.Column="2" Grid.Row="0" Text="{Binding Telefoon}" Foreground="#333" VerticalAlignment="Center"/>
										<StackPanel Grid.Column="3" Grid.Row="0">
											<TextBlock Text="{Binding Straat}"   Foreground="#333"/>
											<TextBlock Text="{Binding Gemeente}" Foreground="#666" FontSize="13"/>
										</StackPanel>
										<StackPanel Grid.Column="5" Grid.Row="0" Orientation="Horizontal" Spacing="5" HorizontalAlignment="Right">
											<Button Content="âœï¸"
													Width="32" Height="30"
													Background="#444A50" Foreground="White"
													Command="{Binding $parent[UserControl].DataContext.EditCommand}"
													CommandParameter="{Binding}"/>
											<Button Content="ðŸ—‘ï¸"
													Width="32" Height="30"
													Background="#AA3333" Foreground="White"
													Command="{Binding $parent[UserControl].DataContext.DeleteCommand}"
													CommandParameter="{Binding}"/>
										</StackPanel>
										<!-- Opmerkingen row -->
										<TextBlock Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="6"
												   Text="{Binding Opmerking}"
												   Foreground="#888"
												   FontStyle="Italic"
												   Margin="0,4,0,0"/>
									</Grid>
								</Border>
							</DataTemplate>
						</ListBox.ItemTemplate>
					</ListBox>
				</Border>



			</StackPanel>
		</ScrollViewer>

		<!-- â–‘â–‘ FOOTER â–‘â–‘ -->
		<Border Grid.Row="2" Background="#F5F5F5" Padding="10">
			<TextBlock Text="{Binding FilteredKlanten.Count, StringFormat='Aantal geladen klanten: {0}'}"
                       HorizontalAlignment="Center"
                       Foreground="#666"/>
		</Border>
	</Grid>

	<!-- â–‘â–‘ STIJLEN â–‘â–‘ -->
	<UserControl.Styles>
		<Style Selector="Button.MainBtn">
			<Setter Property="Background" Value="#444A50"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="FontWeight" Value="Bold"/>
			<Setter Property="CornerRadius" Value="8"/>
			<Setter Property="BorderBrush" Value="Transparent"/>
			<Setter Property="FontSize" Value="15"/>
			<Setter Property="Padding" Value="10,5"/>
		</Style>

		<Style Selector="Button.MainBtn:pointerover">
			<Setter Property="Background" Value="#F5C242"/>
			<Setter Property="Foreground" Value="#222"/>
		</Style>
	</UserControl.Styles>
</UserControl>
